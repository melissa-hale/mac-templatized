field_health:
  - table: {{ monitor_config.project }}:{{ monitor_config.schema }}.{{ monitor_config.table }}  # required
    {%- if monitor_config.name -%}
    name: {{ monitor_config.name }} # optional -- by default it will be autogenerated
    {% endif %}
    description: {{ monitor_config.description }}
    {%- if monitor_config.fields -%}
    fields:
    {% for field in monitor_config.fields %}
      - {{ field }}
    {% endfor %}
    {% endif %}
    {%- if monitor_config.use_important_fields -%}
    use_important_fields: {{ monitor_config.use_important_fields }} # optional -- by default, do not use important fields
    {% endif %}
    {%- if monitor_config.segmented_expressions -%}
    segmented_expressions:
    {% for segmented_expression in monitor_config.segmented_expressions %}
      - {{ segmented_expression }} # Can be a field or a SQL expression
    {% endfor %}
    {% endif %}
    {%- if monitor_config.timestamp_field -%}
    timestamp_field: {{ monitor_config.timestamp_field }}
    {% endif %}
    {%- if monitor_config.timestamp_field_expression -%}
    timestamp_field_expression: {{ monitor_config.timestamp_field_expression }}
    {% endif %}
    {%- if monitor_config.where_condition -%}
    where_condition: {{ monitor_config.where_condition }}
    {% endif %}
    lookback_days: {{ monitor_config.lookback_days }}
    aggregation_time_interval: {{ monitor_config.aggregation_time_interval }}
    {%- if monitor_config.schedule -%}
    schedule:  # optional -- by default, loose schedule with interval_minutes=720 (12h)
      type: {{ monitor_config.schedule.type }}  # required
      interval_minutes: {{ monitor_config.schedule.interval_minutes }}  # required if loose or fixed
      start_time: {{ monitor_config.schedule.start_time | default(now()) }}  # required if fixed
      {%- if monitor_config.schedule.start_time -%}
      timezone: {{ monitor_config.schedule.start_time }} # optional - select regional timezone for daylight savings ex. America/Los_Angeles
      {% endif %}
    {% endif %}
    {%- if monitor_config.labels -%}
    labels:
    {% for label in monitor_config.labels %}
      - {{ label }}
    {% endfor %}
    {% endif %}